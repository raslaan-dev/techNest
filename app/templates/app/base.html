{% load static %}
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0" />
		<title>{% block title %}TechNest{% endblock %}</title>

		<!-- Favicon -->
		<link
			id="favicon"
			rel="icon"
			type="image/png"
			href="{% static 'img/black_solid.png' %}" />

		<!-- Tailwind CSS -->
		<script src="https://cdn.tailwindcss.com"></script>
		{% block extra_css %}{% endblock %}

		<!-- Add the favicon.js script -->
		<script src="{% static 'js/favicon.js' %}"></script>

		<!-- Other common CSS and JS files -->
		{% block extra_head %}{% endblock %}

		<!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

		<!-- Azeret Mono Font -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Azeret+Mono:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
	</head>
	<body class="bg-neutral-950 text-white font-['Azeret_Mono']">
		<!-- Main Content -->
		{% block content %}{% endblock %}
		
		{% block footer %}
		<!-- Footer -->
		<footer class="bg-neutral-900">
			<!-- Your footer content -->
		</footer>
		{% endblock footer %}

		<!-- Overlay and Sidepanel -->
		<div id="cartOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden transition-opacity duration-300"></div>
		<div id="cartSidepanel" class="fixed inset-y-0 right-0 w-full md:w-96 bg-neutral-950 text-white transform translate-x-full transition-transform duration-300 z-50 shadow-xl"></div>

		<!-- Include JavaScript files only once -->
		<script src="{% static 'js/navbar.js' %}"></script>
		<script src="{% static 'js/cart.js' %}"></script>
		{% block extra_js %}
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				const userMenuButton = document.getElementById('userMenuButton');
				const userMenu = document.getElementById('userMenu');
				
				console.log('userMenuButton:', userMenuButton); // Debug log
				console.log('userMenu:', userMenu); // Debug log

				if (userMenuButton && userMenu) {
					console.log('Adding event listeners...'); // Debug log
					
					userMenuButton.addEventListener('click', function(e) {
						console.log('Button clicked!'); // Debug log
						e.preventDefault();
						userMenu.classList.toggle('hidden');
					});

					document.addEventListener('click', function(e) {
						if (!userMenuButton.contains(e.target) && !userMenu.contains(e.target)) {
							userMenu.classList.add('hidden');
						}
					});
				} else {
					console.log('Menu elements not found!'); // Debug log
				}
			});
		</script>
		{% endblock %}
	</body>
</html>
